An experimental db design for Siirtokarjalaisten tie data extracted with Kaira. Reads json-dataset generated by Kaira and creates
a Postgres database for MS Access backend. Mostly designed as proof of concept and prototype for later db-schemas
and more advanced Kaira db-integration.

## Dev environment
* Python 3.5.3 64-bit
* Microsoft Access 2013 or 2016 drivers
* Microsoft Access 2016
* Pyodbc likely has to be downloaded and installed from [here](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pyodbc)
* Postgres 9.6.1
* plpython3
* PostGIS bundle for Postgres 9.6
* [PL/Python](https://www.postgresql.org/docs/9.6/static/plpython.html)(Python 3)
* [Postgres ODBC drivers](https://www.postgresql.org/ftp/odbc/versions/) 

Before use, add following environment variables for database connection:
```
DB_NAME
DB_USER
DB_MASTER_NAME (required by unit tests)
```

Or add following `settings.py` to material directory with contents:
```
import os

os.environ['DB_NAME'] = 'learning-from-our-past'
os.environ['DB_USER']= 'kaira'
```

You also need to setup `PGPASSFILE`environment variable, which refers to
.pgpass file containing details for connection and password. Usually this is located
at `~/.pgpass`. Add to the file following contents:

```
localhost:5432:learning-from-our-past:postgres:<password>
```

Add similar entry for production connection with correct host and passwords. Set rights of the file to the
0600. [https://www.postgresql.org/docs/9.6/static/libpq-pgpass.html](Read more about PGPASSFILE)

## Postgres and Access
To make postgres and Access work better together, at least boolean values require some setup. Refer
to [this](http://www.postgresonline.com/journal/archives/24-Using-MS-Access-with-PostgreSQL.html) and [this](http://bahut.alma.ch/2006/04/access-odbc-postgresql-boolean-mess.html) for instructions
how to setup ODBC driver (booleans as char: false, True is -1 to true) and Access ui-setup to show boolean fields as checkboxes.
